<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>url hash</title>
</head>
<body>
  <div></div>

  <script>
    var oldHash = "";
    var target = "http://www.myapp.com/url_hash_test";
    var checkMessage = function() {
      var newHash = window.location.hash;
      if (newHash.length > 1) {
        newHash = newHash.slice(1, newHash.length);
        if (newHash !== oldHash) {
          oldHash = newHash;
          var msgs = JSON.parse(newHash);
          var msg = msgs.msg;
          sendMessage("Hello-father");
          document.querySelector('div').innerHTML = msg;
        }
      }
    }
    setInterval(checkMessage, 1000);
    function sendMessage(msg) {
      var hash = "msg=" + msg;
      parent.location.href = target + "#" + hash;
    }
  </script>
</body>
</html>